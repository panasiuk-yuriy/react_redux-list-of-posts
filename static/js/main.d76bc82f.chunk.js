(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{26:function(e,t,n){e.exports=n(43)},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),s=n.n(c),o=n(2),u=n(24),l=(n(35),n(7)),i=n.n(l),m=n(12),d=n(5),p=n(20),f=n(21),E=n(22),v={isLoading:!1,isVisible:!1},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return{isVisible:!1,isLoading:!0};case"FINISH_LOADING":return{isLoading:!1,isVisible:!0};default:return e}},_=function(e){return{type:"SET_MESSAGE",message:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return t.message;default:return e}},y=n(8),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return t.posts;case"DELETE_POST":return e.filter((function(e){return e.id!==t.postId}));case"DELETE_COMMENT":return e.map((function(e){if(e.id===t.postId){var n,a=null===(n=e.userComments)||void 0===n?void 0:n.filter((function(e){return e.id!==t.commentId}));return Object(y.a)(Object(y.a)({},e),{},{userComments:a})}return e}));default:return e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_QUERY":return t.text.toLowerCase();default:return e}},g=function(e){return fetch("https://mate-academy.github.io/react_dynamic-list-of-posts/api/"+e).then((function(e){return e.json()}))},j=function(){var e=Object(m.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("posts.json");case 2:return t=e.sent,e.next=5,g("users.json");case 5:return n=e.sent,e.next=8,g("comments.json");case 8:return a=e.sent,e.abrupt("return",t.map((function(e){var t=n.find((function(t){return t.id===e.userId})),r=a.filter((function(t){return t.postId===e.id}));return Object(y.a)(Object(y.a)({},e),{},{user:t,userComments:r})})));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=Object(d.combineReducers)({loading:b,posts:O,message:h,query:N}),S=function(e){return e.loading.isLoading},T=function(e){return e.loading.isVisible},C=function(e){return e.message},L=Object(E.a)((function(e){return e.posts}),(function(e){return e.query}),(function(e,t){return e.filter((function(e){return(e.body+e.title).toLowerCase().includes(t.toLowerCase())}))})),w=Object(d.createStore)(I,Object(p.composeWithDevTools)(Object(d.applyMiddleware)(f.a))),x=function(){var e=Object(o.b)(),t=Object(o.c)(S);return r.a.createElement("button",{type:"button",className:"buttonload",onClick:function(){return e(function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"START_LOADING"}),e.prev=1,e.next=4,j();case 4:n=e.sent,t({type:"SET_POSTS",posts:n}),t(_("Data was received")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(_("Error occurred when loading data"));case 12:t({type:"FINISH_LOADING"});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())},disabled:t},t?"Loading...":"Load")},A=(n(37),function(e){var t,n,a,c=e.user;return r.a.createElement("div",{className:"post__user user"},r.a.createElement("h4",{className:"user__name"},null===c||void 0===c?void 0:c.name),r.a.createElement("p",{className:"user__email"},"Email:",r.a.createElement("br",null),r.a.createElement("a",{href:"mailto:".concat(null===c||void 0===c?void 0:c.email)},null===c||void 0===c?void 0:c.email)),r.a.createElement("p",null,"City:",r.a.createElement("br",null),r.a.createElement("span",{className:"user__address"},null===c||void 0===c||null===(t=c.address)||void 0===t?void 0:t.city)),r.a.createElement("p",null,"Street:",r.a.createElement("br",null),r.a.createElement("span",{className:"user__address"},null===c||void 0===c||null===(n=c.address)||void 0===n?void 0:n.street)),r.a.createElement("p",null,"Address:",r.a.createElement("br",null),r.a.createElement("span",{className:"user__address"},null===c||void 0===c||null===(a=c.address)||void 0===a?void 0:a.suite)))}),k=(n(38),function(e){var t=e.comment,n=t.id,a=t.name,c=t.email,s=t.body,u=e.postId,l=Object(o.b)();return r.a.createElement("div",{className:"comment"},r.a.createElement("button",{className:"btn btn__comment",type:"button",onClick:function(){return l(function(e,t){return{type:"DELETE_COMMENT",postId:e,commentId:t}}(u,n))}},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("h5",{className:"comment__name"},a),r.a.createElement("p",{className:"comment__body"},s),r.a.createElement("p",null,r.a.createElement("a",{href:"mailto:".concat(c),className:"comment__email"},c)))}),D=function(e){var t=e.postId,n=e.userComments;return r.a.createElement("div",{className:"comments__container"},null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(k,{key:e.id,comment:e,postId:t})})))},G=(n(39),function(e){var t=e.post,n=t.id,a=t.title,c=t.body,s=t.user,u=t.userComments,l=Object(o.b)();return r.a.createElement("div",{className:"post"},r.a.createElement("button",{className:"btn bnt__post",type:"button",onClick:function(){return l({type:"DELETE_POST",postId:n})}},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("h3",{className:"post__title"},a),r.a.createElement("p",{className:"post__body"},c),r.a.createElement(A,{user:s}),r.a.createElement(D,{userComments:u,postId:n}))}),M=(n(40),n(25)),R=n(23),P=n.n(R),H=(n(41),function(){var e=Object(o.b)(),t=Object(a.useState)(""),n=Object(M.a)(t,2),c=n[0],s=n[1],u=Object(a.useCallback)(P()(e,500),[]);return r.a.createElement("input",{type:"text",value:c,placeholder:"Posts filter",onChange:function(e){return function(e){var t=e.currentTarget.value;s(t),u({type:"CHANGE_QUERY",text:t})}(e)}})}),V=function(){var e=Object(o.c)(L);return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Posts: ".concat(e.length)),r.a.createElement(H,null),r.a.createElement("div",{className:"post__container"},e.map((function(e){return r.a.createElement(G,{key:e.id,post:e})}))))},F=function(){var e=Object(o.c)(S),t=Object(o.c)(T),n=Object(o.c)(C)||"Ready!";return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Redux list of posts"),r.a.createElement("h2",null,e?"Loading...":n),!t&&r.a.createElement(x,null),t&&r.a.createElement(V,null))},q=function(){return r.a.createElement(o.a,{store:w},r.a.createElement(u.a,null,r.a.createElement(F,null)))};s.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.d76bc82f.chunk.js.map