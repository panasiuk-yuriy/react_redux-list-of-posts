{"version":3,"sources":["store/loading.ts","store/message.ts","store/posts.ts","store/query.ts","helpers/api.ts","store/index.ts","components/Start.tsx","components/User/User.tsx","components/Comment/Comment.tsx","components/CommentList.tsx","components/Post/Post.tsx","components/SearchField/SearchField.tsx","components/PostList/PostList.tsx","App.tsx","index.tsx"],"names":["initialState","isLoading","isVisible","reducer","state","action","type","setMessage","message","posts","filter","post","id","postId","map","userComments","comment","commentId","query","text","toLowerCase","getAll","url","fetch","then","responce","json","loadPosts","a","postFromServer","usersFromServer","commentsFromServer","user","find","currentUser","userId","rootReducer","combineReducers","loading","loadingReducer","postsReducer","messageReducer","queryReducer","getMessage","getVisiblePosts","createSelector","body","title","includes","store","createStore","composeWithDevTools","applyMiddleware","thunk","Start","dispatch","useDispatch","isLoad","useSelector","className","onClick","postsFromServer","disabled","User","name","href","email","address","city","street","suite","Comment","deleteComment","CommentList","key","Post","SearchField","useState","visibleQuery","setVisibleQuery","dispatchWithDebounce","useCallback","debounce","value","placeholder","onChange","event","newQuery","currentTarget","handleSetQuery","PostList","visiblePosts","length","App","isVisibleContent","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d76bc82f.chunk.js","sourcesContent":["import { AnyAction } from 'redux';\n\nconst START_LOADING = 'START_LOADING';\nconst FINISH_LOADING = 'FINISH_LOADING';\n\nexport const startLoading = () => ({ type: START_LOADING });\nexport const finishLoading = () => ({ type: FINISH_LOADING });\n\ntype LoadingState = {\n  isLoading: boolean;\n  isVisible: boolean;\n};\n\nconst initialState = {\n  isLoading: false,\n  isVisible: false,\n};\n\nconst reducer = (state = initialState, action: AnyAction): LoadingState => {\n  switch (action.type) {\n    case START_LOADING:\n      return {\n        isVisible: false,\n        isLoading: true,\n      };\n\n    case FINISH_LOADING:\n      return {\n        isLoading: false,\n        isVisible: true,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst SET_MESSAGE = 'SET_MESSAGE';\n\nexport const setMessage = (message: string) => ({ type: SET_MESSAGE, message });\n\nconst reducer = (message = '', action: AnyAction) => {\n  switch (action.type) {\n    case SET_MESSAGE:\n      return action.message;\n\n    default:\n      return message;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst SET_POSTS = 'SET_POSTS';\nconst DELETE_POST = 'DELETE_POST';\nconst DELETE_COMMENT = 'DELETE_COMMENT';\n\nexport const setPosts = (posts: Post[]) => ({ type: SET_POSTS, posts });\nexport const deletePost = (postId: number) => ({ type: DELETE_POST, postId });\nexport const deleteComment = (postId: number, commentId: number) => (\n  { type: DELETE_COMMENT, postId, commentId });\n\nconst reducer = (posts = [], action: AnyAction) => {\n  switch (action.type) {\n    case SET_POSTS:\n      return action.posts;\n    case DELETE_POST:\n      return posts.filter((post: Post) => post.id !== action.postId);\n    case DELETE_COMMENT:\n      return posts.map((post: Post) => {\n        if (post.id === action.postId) {\n          const userComments = post.userComments?.filter((comment: Comment) => (\n            comment.id !== action.commentId));\n\n          return {\n            ...post,\n            userComments,\n          };\n        }\n\n        return post;\n      });\n\n    default:\n      return posts;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst CHANGE_QUERY = 'CHANGE_QUERY';\n\nexport const setQuery = (text: string) => ({ type: CHANGE_QUERY, text });\n\nconst reducer = (query = '', action: AnyAction) => {\n  switch (action.type) {\n    case CHANGE_QUERY:\n      return action.text.toLowerCase();\n    default:\n\n      return query;\n  }\n};\n\nexport default reducer;\n","const API_URL = 'https://mate-academy.github.io/react_dynamic-list-of-posts/api/';\n\nconst getAll = <T> (url: string): Promise<T[]> => {\n  return fetch(API_URL + url)\n    .then(responce => responce.json());\n};\n\nconst getPosts = () => getAll<Post>('posts.json');\nconst getUsers = () => getAll<User>('users.json');\nconst getComments = () => getAll<Comment>('comments.json');\n\nexport const loadPosts = async () => {\n  const postFromServer = await getPosts();\n  const usersFromServer = await getUsers();\n  const commentsFromServer = await getComments();\n\n\n  return postFromServer.map(post => {\n    const user = usersFromServer\n      .find((currentUser: User) => currentUser.id === post.userId);\n    const userComments = commentsFromServer\n      .filter((comment: Comment) => (comment.postId === post.id));\n\n    return {\n      ...post,\n      user,\n      userComments,\n    };\n  });\n};\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport { Dispatch } from 'react';\nimport { createSelector } from 'reselect';\nimport loadingReducer, { finishLoading, startLoading } from './loading';\nimport messageReducer, { setMessage } from './message';\nimport postsReducer, { setPosts } from './posts';\nimport queryReducer from './query';\nimport { loadPosts } from '../helpers/api';\n\nconst rootReducer = combineReducers({\n  loading: loadingReducer,\n  posts: postsReducer,\n  message: messageReducer,\n  query: queryReducer,\n});\n\nexport type RootState = {\n  loading: {\n    isLoading: boolean;\n    isVisible: boolean;\n  };\n  message: string;\n  posts: Post[];\n  query: string;\n};\n\nexport const isLoading = (state: RootState) => state.loading.isLoading;\nexport const isVisible = (state: RootState) => state.loading.isVisible;\nexport const getMessage = (state: RootState) => state.message;\nexport const getPosts = (state: RootState) => state.posts;\nexport const getQuery = (state: RootState) => state.query;\n\nexport const getVisiblePosts = createSelector(\n  getPosts,\n  getQuery,\n\n  (posts: Post[], query: string) => {\n    return posts.filter(post => (post.body + post.title)\n      .toLowerCase()\n      .includes(query.toLowerCase()));\n  },\n);\n\nexport const loadData = () => {\n  return async (dispatch: Dispatch<unknown>) => {\n    dispatch(startLoading());\n    try {\n      const postsFromServer = await loadPosts();\n\n      dispatch(setPosts(postsFromServer));\n      dispatch(setMessage('Data was received'));\n    } catch (error) {\n      dispatch(setMessage('Error occurred when loading data'));\n    }\n\n    dispatch(finishLoading());\n  };\n};\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk)),\n);\n\nexport default store;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { isLoading, loadData } from '../store';\n\nexport const Start = () => {\n  const dispatch = useDispatch();\n  const isLoad = useSelector(isLoading);\n\n  return (\n    <button\n      type=\"button\"\n      className=\"buttonload\"\n      onClick={() => dispatch(loadData())}\n      disabled={isLoad}\n    >\n      {isLoad ? 'Loading...' : 'Load'}\n    </button>\n  );\n};\n","import React from 'react';\nimport './User.css';\n\ntype Props = {\n  user?: User;\n};\n\nconst User: React.FC<Props> = ({ user }) => (\n  <div className=\"post__user user\">\n    <h4 className=\"user__name\">{user?.name}</h4>\n    <p className=\"user__email\">\n      Email:\n      <br />\n      <a href={`mailto:${user?.email}`}>\n\n        {user?.email}\n      </a>\n    </p>\n    <p>\n      City:\n      <br />\n      <span className=\"user__address\">{user?.address?.city}</span>\n    </p>\n    <p>\n      Street:\n      <br />\n      <span className=\"user__address\">{user?.address?.street}</span>\n    </p>\n    <p>\n      Address:\n      <br />\n      <span className=\"user__address\">{user?.address?.suite}</span>\n    </p>\n  </div>\n);\n\nexport default User;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { deleteComment } from '../../store/posts';\nimport './Comment.css';\n\ntype Props = {\n  comment: Comment;\n  postId: number;\n};\n\nconst Comment: React.FC<Props> = ({\n  // лінтер так виставляє Sorry;\n  comment: {\n    id, name, email, body,\n  },\n  postId,\n}) => {\n  const dispatch = useDispatch();\n\n  return (\n    <div className=\"comment\">\n      <button\n        className=\"btn btn__comment\"\n        type=\"button\"\n        onClick={() => dispatch(deleteComment(postId, id))}\n      >\n        <i className=\"fa fa-trash\" />\n\n      </button>\n      <h5 className=\"comment__name\">{name}</h5>\n      <p className=\"comment__body\">{body}</p>\n      <p>\n        <a href={`mailto:${email}`} className=\"comment__email\">\n          {email}\n        </a>\n      </p>\n    </div>\n\n  );\n};\n\nexport default Comment;\n","import React from 'react';\nimport Comment from './Comment/Comment';\n\ntype Props = {\n  userComments?: Comment[];\n  postId: number;\n};\n\nconst CommentList: React.FC<Props> = ({ postId, userComments }) => (\n  <div className=\"comments__container\">\n    {userComments?.map((comment) => (\n      <Comment\n        key={comment.id}\n        comment={comment}\n        postId={postId}\n      />\n    ))}\n  </div>\n);\n\nexport default CommentList;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport User from '../User/User';\nimport CommentList from '../CommentList';\nimport './Post.css';\nimport { deletePost } from '../../store/posts';\n\ninterface Props {\n  post: Post;\n}\n\nconst Post: React.FC<Props> = ({\n  post: {\n    id, title, body, user, userComments,\n  },\n}) => {\n  const dispatch = useDispatch();\n\n  return (\n\n    <div className=\"post\">\n      <button\n        className=\"btn bnt__post\"\n        type=\"button\"\n        onClick={() => dispatch(deletePost(id))}\n      >\n        <i className=\"fa fa-trash\" />\n      </button>\n\n      <h3 className=\"post__title\">\n        {title}\n      </h3>\n      <p className=\"post__body\">\n        {body}\n      </p>\n      <User user={user} />\n      <CommentList userComments={userComments} postId={id} />\n    </div>\n  );\n};\n\nexport default Post;\n","import React, { useState, useCallback, FormEvent } from 'react';\nimport debounce from 'lodash.debounce';\nimport { useDispatch } from 'react-redux';\nimport { setQuery } from '../../store/query';\nimport './SearchField.css';\n\nconst SearchField = () => {\n  const dispatch = useDispatch();\n  const [visibleQuery, setVisibleQuery] = useState<string>('');\n\n  const dispatchWithDebounce = useCallback(debounce(dispatch, 500), []);\n\n  const handleSetQuery = (event: FormEvent<HTMLInputElement>) => {\n    const newQuery = event.currentTarget.value;\n\n    setVisibleQuery(newQuery);\n    dispatchWithDebounce(setQuery(newQuery));\n  };\n\n  return (\n    <input\n      type=\"text\"\n      value={visibleQuery}\n      placeholder=\"Posts filter\"\n      onChange={(event) => handleSetQuery(event)}\n    />\n  );\n};\n\nexport default SearchField;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Post from '../Post/Post';\nimport './PostList.css';\nimport { getVisiblePosts } from '../../store/index';\nimport SearchField from '../SearchField/SearchField';\n\nconst PostList = () => {\n  const visiblePosts = useSelector(getVisiblePosts);\n\n  return (\n    <>\n      <p>{`Posts: ${visiblePosts.length}`}</p>\n      <SearchField />\n      <div className=\"post__container\">\n        {visiblePosts.map((post: Post) => (\n          <Post\n            key={post.id}\n            post={post}\n          />\n        ))}\n      </div>\n    </>\n  );\n};\n\nexport default PostList;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport './App.scss';\nimport { Start } from './components/Start';\nimport { isLoading, getMessage, isVisible } from './store';\nimport PostList from './components/PostList/PostList';\n\nconst App = () => {\n  const isLoad = useSelector(isLoading);\n  const isVisibleContent = useSelector(isVisible);\n  const message = useSelector(getMessage) || 'Ready!';\n\n  return (\n    <div className=\"App\">\n      <h1>Redux list of posts</h1>\n      <h2>{isLoad ? 'Loading...' : message}</h2>\n      {!isVisibleContent && <Start />}\n      {isVisibleContent && <PostList />}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\nimport store from './store';\n\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}