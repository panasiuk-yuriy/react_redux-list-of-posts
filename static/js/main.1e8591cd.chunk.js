(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{26:function(e,t,n){e.exports=n(43)},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),s=n.n(c),o=n(2),l=n(24),u=(n(35),n(14)),i=n.n(u),m=n(7),d=n(19),p=n(5),E=n(20),f=n(21),v=n(22),b={loading:!1,visible:!1},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return{visible:!1,loading:!0};case"FINISH_LOADING":return{loading:!1,visible:!0};default:return e}},h=function(e){return{type:"SET_MESSAGE",message:e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return t.message;default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return t.posts;case"DELETE_POST":return e.filter((function(e){return e.id!==t.postId}));case"DELETE_COMMENT":return e.map((function(e){if(e.id===t.postId){var n,a=null===(n=e.userComments)||void 0===n?void 0:n.filter((function(e){return e.id!==t.commentId}));return Object(m.a)(Object(m.a)({},e),{},{userComments:a})}return e}));default:return e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_QUERY":return t.text.toLowerCase();default:return e}},g=function(e){return fetch("https://mate-academy.github.io/react_dynamic-list-of-posts/api/"+e).then((function(e){return e.json()}))},j=Object(p.combineReducers)({loading:_,posts:O,message:y,query:N}),I=function(e){return e.loading.loading},S=function(e){return e.loading.visible},T=function(e){return e.message},C=Object(v.a)((function(e){return e.posts}),(function(e){return e.query}),(function(e,t){return e.filter((function(e){return(e.body+e.title).toLowerCase().includes(t.toLowerCase())}))})),w=Object(p.createStore)(j,Object(E.composeWithDevTools)(Object(p.applyMiddleware)(f.a))),L=function(){var e=Object(o.b)(),t=Object(o.c)(I);return r.a.createElement("button",{type:"button",className:"buttonload",onClick:function(){return e(function(){var e=Object(d.a)(i.a.mark((function e(t){var n,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"START_LOADING"}),e.prev=1,e.next=4,g("posts.json");case 4:return n=e.sent,e.next=7,g("users.json");case 7:return a=e.sent,e.next=10,g("comments.json");case 10:r=e.sent,c=n.map((function(e){var t=a.find((function(t){return t.id===e.userId})),n=r.filter((function(t){return t.postId===e.id}));return Object(m.a)(Object(m.a)({},e),{},{user:t,userComments:n})})),t(h("Data was received")),t({type:"SET_POSTS",posts:c}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t(h("Error occurred when loading data"));case 19:t({type:"FINISH_LOADING"});case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}())},disabled:t},t?"Loading...":"Load")},x=(n(37),function(e){var t,n,a,c=e.user;return r.a.createElement("div",{className:"post__user user"},r.a.createElement("h4",{className:"user__name"},null===c||void 0===c?void 0:c.name),r.a.createElement("p",{className:"user__email"},"Email:",r.a.createElement("br",null),r.a.createElement("a",{href:"mailto:".concat(null===c||void 0===c?void 0:c.email)},null===c||void 0===c?void 0:c.email)),r.a.createElement("p",null,"City:",r.a.createElement("br",null),r.a.createElement("span",{className:"user__address"},null===c||void 0===c||null===(t=c.address)||void 0===t?void 0:t.city)),r.a.createElement("p",null,"Street:",r.a.createElement("br",null),r.a.createElement("span",{className:"user__address"},null===c||void 0===c||null===(n=c.address)||void 0===n?void 0:n.street)),r.a.createElement("p",null,"Address:",r.a.createElement("br",null),r.a.createElement("span",{className:"user__address"},null===c||void 0===c||null===(a=c.address)||void 0===a?void 0:a.suite)))}),A=(n(38),function(e){var t=e.comment,n=t.id,a=t.name,c=t.email,s=t.body,l=e.postId,u=Object(o.b)();return r.a.createElement("div",{className:"comment"},r.a.createElement("button",{className:"btn btn__comment",type:"button",onClick:function(){return u(function(e,t){return{type:"DELETE_COMMENT",postId:e,commentId:t}}(l,n))}},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("h5",{className:"comment__name"},a),r.a.createElement("p",{className:"comment__body"},s),r.a.createElement("p",null,r.a.createElement("a",{href:"mailto:".concat(c),className:"comment__email"},c)))}),k=function(e){var t=e.postId,n=e.userComments;return r.a.createElement("div",{className:"comments__container"},null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(A,{key:e.id,comment:e,postId:t})})))},D=(n(39),function(e){var t=e.post,n=t.id,a=t.title,c=t.body,s=t.user,l=t.userComments,u=Object(o.b)();return r.a.createElement("div",{className:"post"},r.a.createElement("button",{className:"btn bnt__post",type:"button",onClick:function(){return u({type:"DELETE_POST",postId:n})}},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("h3",{className:"post__title"},a),r.a.createElement("p",{className:"post__body"},c),r.a.createElement(x,{user:s}),r.a.createElement(k,{userComments:l,postId:n}))}),G=(n(40),n(25)),M=n(23),R=n.n(M),P=(n(41),function(){var e=Object(o.b)(),t=Object(a.useState)(""),n=Object(G.a)(t,2),c=n[0],s=n[1],l=Object(a.useCallback)(R()(e,500),[]);return r.a.createElement("input",{type:"text",value:c,placeholder:"Posts filter",onChange:function(e){return function(e){var t=e.currentTarget.value;s(t),l({type:"CHANGE_QUERY",text:t})}(e)}})}),H=function(){var e=Object(o.c)(C);return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),r.a.createElement("div",{className:"post__container"},e.map((function(e){return r.a.createElement(D,{key:e.id,post:e})}))))},F=function(){var e=Object(o.c)(I),t=Object(o.c)(S),n=Object(o.c)(T)||"Ready!";return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Redux list of posts"),r.a.createElement("h2",null,e?"Loading...":n),!t&&r.a.createElement(L,null),t&&r.a.createElement(H,null))},q=function(){return r.a.createElement(o.a,{store:w},r.a.createElement(l.a,null,r.a.createElement(F,null)))};s.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.1e8591cd.chunk.js.map